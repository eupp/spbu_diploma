\input{tikzPatterns}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Misc. Math  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% set notation
\newcommand{\set}[1]{\{#1\}}

% sequence notation
\newcommand{\seq}{;}

% tuple with angle brackets
\newcommand{\tup}[1]{\langle #1 \rangle}

% first and second components of a pair
\newcommand{\fst}[1]{\mathit{fst}(#1)}
\newcommand{\snd}[1]{\mathit{snd}(#1)}

% semantics brackets
\newcommand{\sem}[1]{\llbracket #1 \rrbracket}

% equality by definition
\newcommand{\defeq}{\triangleq}

% function arrow
\newcommand{\fun}{\rightarrow}

% partial function arrow
\newcommand{\pfun}{\rightharpoonup}

% shorter subset notation
\newcommand{\suq}{\subseteq}

% shorter partial order notation
\newcommand{\squ}{\sqsubset}
\newcommand{\squq}{\sqsubseteq}


% homomorphism arrow (TODO: change notations)
\newcommand{\homf}[1][{}]{\underset{#1}{\leadsto}}

% isomorphism 
\newcommand{\isof}[1][{}]{\underset{#1}\sim}

% power set
\newcommand{\pwset}[1]{\mathcal{P}(#1)}

% prefix/suffix 
\newcommand{\dwset}[1]{\overline{\lceil{#1}\rceil}}
\newcommand{\upset}[1]{\underline{\lfloor{#1}\rfloor}}

% strict prefix/suffix 
\newcommand{\dwsset}[1]{\lceil{#1}\rceil}
\newcommand{\upsset}[1]{\lfloor{#1}\rfloor}

% liftings of a function
\newcommand{\fmap}[1]{{\llceil #1 \rrceil}}
\newcommand{\fcomap}[1]{{\llfloor #1 \rrfloor}}

% function-to-relation
\newcommand{\frel}[1]{#1^\uparrow}

% epsilon/empty 
\newcommand{\eps}{\epsilon}

% missing greek letters
\newcommand{\Tau}{\mathrm{T}}
\newcommand{\Ell}{\mathcal{L}}

% sequential composition (of relations)
\newcommand{\seqc}{\;}

% some math sets
\newcommand{\N}{{\mathbb{N}}}
\newcommand{\Z}{{\mathbb{Z}}}
\newcommand{\Q}{{\mathbb{Q}}}

% domain/codomain notation
\newcommand{\dom}[1]{\textit{dom}{({#1})}}
\newcommand{\cod}[1]{\textit{codom}{({#1})}}

% restriction
\newcommand{\rst}[1]{|_{#1}}

% length
\newcommand{\len}[1]{\mathsf{len}({#1})}

% cardinality
\newcommand{\card}[1]{|{#1}|}

%\newcommand{\implies}{{\Rightarrow}}
\renewcommand{\iff}{{\Longleftrightarrow}}

% finite subset
% \newcommand{\finsubseteq}{\underset{fin}{\subseteq}}
\newcommand{\finsubseteq}{{\subseteq}_{fin}}

% predecessor function
\newcommand{\pred}{\mathit{pred}}

% maps
\newcommand{\appmap}[2]{#1(#2)}
\newcommand{\updmap}[3]{#1[#2 \mapsto #3]}

% prefix order
\newcommand{\prefle}{\preccurlyeq}

% such that notation in sets
\newcommand{\sth}{\; | \;}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  LTS Defs  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\LTS}{\Sigma}

% (labelled) transition 
\newcommand{\tr}[3][{}]{{#2}\xrightarrow[#1]{}{#3}}
\newcommand{\ltr}[4][{}]{{#3}\xrightarrow[#1]{#2}{#4}}

% to denote some state
\newcommand{\state}{\sigma}

% set of states
\newcommand{\State}{\mathbb{S}}

% function assigning initial states
\newcommand{\initst}{\iota}

% step tuple
\newcommand{\step}[3]{\tup{#2, #1, #3}}

% step tuple type
\newcommand{\Step}[2]{{#2 \times #1 \times #2}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Pomsets and Event Struct. Defs  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\lab}{\lambda}
\newcommand{\ca}{\leqslant}
\newcommand{\sca}{<}
\newcommand{\ica}{\lessdot}
\newcommand{\cf}{\#}
\newcommand{\icf}{\#^{\mu}}
\newcommand{\cons}{\mathcal{C}}
\newcommand{\gcf}{\mathbb{\#}}

% to denote some subset of events
\newcommand{\eset}{\mathcal{E}}

% set of all pomsets (generated by an alphabet)
\newcommand{\Pom}[1][{}]{%
  \textsc{Pom}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% set of all threaded pomsets (generated by an alphabet)
\newcommand{\ThrdPom}[1][{}]{%
  \textsc{ThrdPom}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% set of all deterministic pomsets (generated by an alphabet)
\newcommand{\DetPom}[1][{}]{%
  \textsc{DetPom}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% pomset language (generated by an alphabet)
\newcommand{\Pomlang}[1][{}]{%
  \textsc{Pomlang}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% set of all prime event structures (generated by an alphabet)
\newcommand{\PrimeES}[1][{}]{%
  \textsc{PES}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% set of all prime event structures (generated by an alphabet)
\newcommand{\ThrdPrimeES}[1][{}]{%
  \textsc{ThrdPES}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

% pomset language of an event structure
\newcommand{\pomlang}[1]{\mathbf{Pom}(#1)\xspace}


\newcommand{\pomStep}[1]{\xhookrightarrow{#1}}
\newcommand{\esStep}[1]{\xrightarrow{#1}}

% step synchronization relation
\newcommand{\ssync}{\gg}
\newcommand{\posync}{\underset{\lPO}{\gg}}
\newcommand{\rfsync}{\underset{\lRF}{\gg}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Weak Memory Defs  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\Event}{\mathsf{Event}}
\newcommand{\Tid}{\mathsf{Tid}}
\newcommand{\Loc}{\mathsf{Loc}}
\newcommand{\Val}{\mathsf{Val}}
\newcommand{\Lab}{\mathsf{Lab}}
\newcommand{\Mod}{\mathsf{Mod}}

\newcommand{\na}{\mathtt{na}}
\newcommand{\pln}{\mathtt{pln}}
\newcommand{\rlx}{\mathtt{rlx}}
\newcommand{\rel}{{\mathtt{rel}}}
\newcommand{\acq}{{\mathtt{acq}}}
\newcommand{\acqrel}{{\mathtt{acqrel}}}
\newcommand{\sco}{{\mathtt{sc}}}

\newcommand{\isex}{{\mathtt{ex}}}
\newcommand{\isnotex}{{\operatorname{\mathtt{not-ex}}}}

\newcommand{\lR}{{\mathtt{R}}}
\newcommand{\lW}{{\mathtt{W}}}
\newcommand{\lF}{{\mathtt{F}}}
\newcommand{\lRex}{\lR_{\isex}}
\newcommand{\lWex}{\lW_{\isex}}
\newcommand{\lTS}{\mathtt{TS}}
\newcommand{\lTE}{\mathtt{TE}}

\newcommand{\wlab}[3]{{\lW}^{#1}({#2},{#3})}
\newcommand{\rlab}[3]{{\lR}^{#1}({#2},{#3})}
\newcommand{\flab}[1]{{\lF}^{#1}}
\newcommand{\ulab}[4]{{\lU}^{#1}({#2},{#3},{#4})}

\newcommand{\tslab}{{\lTS}}
\newcommand{\telab}{{\lTE}}

% initial value
\newcommand{\initval}{\bot}

\newcommand{\lE}{{\mathtt{E}}}
\newcommand{\lEi}{{\Init}}
\newcommand{\Init}{\mathsf{Init}}
\newcommand{\ESinit}{S_{\rm init}}

\newcommand{\lVIS}{{\mathtt{Vis}}}

\newcommand{\lLAB}{{\mathtt{lab}}}
\newcommand{\lID}{{\mathtt{id}}}
\newcommand{\lTID}{{\mathtt{tid}}}
\newcommand{\lSN}{{\mathtt{sn}}}
\newcommand{\lTYP}{{\mathtt{typ}}}
\newcommand{\lLOC}{{\mathtt{loc}}}
\newcommand{\lMOD}{{\mathtt{mod}}}
\newcommand{\lVAL}{{\mathtt{val}}}
\newcommand{\lVALR}{{\mathtt{val_r}}}
\newcommand{\lVALW}{{\mathtt{val_w}}}
\newcommand{\lSTEP}{{\mathtt{st}}}

\newcommand{\lEQLAB}{=_{\lLAB}}
\newcommand{\lEQTID}{=_{\lTID}}
\newcommand{\lEQLOC}{=_{\lLOC}}
\newcommand{\lEQVAL}{=_{\lVAL}}

\colorlet{colorPO}{gray!60!black}
\colorlet{colorPPO}{magenta}
\colorlet{colorCF}{red!60!black}
\colorlet{colorECF}{red!60!black}
\colorlet{colorJF}{blue!60!black}
\colorlet{colorRF}{green!60!black}
\colorlet{colorEW}{brown}
\colorlet{colorMO}{orange}
\colorlet{colorFR}{purple}
\colorlet{colorECO}{orange!80!black}
\colorlet{colorSYN}{green!40!black}
\colorlet{colorHB}{blue}
\colorlet{colorPPO}{magenta}
\colorlet{colorRMW}{olive!70!black}
\colorlet{colorRS}{blue}
\colorlet{colorREL}{blue!70!black}
\colorlet{colorSC}{violet}
\colorlet{colorPSC}{violet}
\colorlet{colorWB}{orange!70!black}
\colorlet{colorSCB}{violet}
\colorlet{colorDETOUR}{teal}
\colorlet{colorDEPS}{violet}
\colorlet{colorFENCE}{olive}
\colorlet{colorCOV}{magenta!20}
\colorlet{colorISS}{blue!10!white}
\colorlet{colorVF}{purple!70!black}

\newcommand{\lPO}{{\color{colorPO}\mathtt{po}}}
\newcommand{\lPOimm}{{\color{colorPO}\mathtt{po_{imm}}}}
\newcommand{\lCF}{{\color{colorCF}\mathtt{cf}}}
\newcommand{\lCFimm}{{\color{colorCF}\mathtt{cf_{imm}}}}
\newcommand{\lECF}{{\color{colorECF}\mathtt{ecf}}}
\newcommand{\lJF}{{\color{colorJF} \mathtt{jf}}}
\newcommand{\lRF}{{\color{colorRF} \mathtt{rf}}}
\newcommand{\lPORF}{\lPO\lRF}
\newcommand{\lRMW}{{\color{colorRMW} \mathtt{rmw}}}
\newcommand{\lMO}{{\color{colorMO} \mathtt{mo}}}
\newcommand{\lEW}{{\color{colorEW} \mathtt{ew}}}
\newcommand{\lCO}{{\color{colorMO} \mathtt{co}}}
\newcommand{\lFR}{{\color{colorFR} \mathtt{fr}}}
\newcommand{\lECO}{{\color{colorECO} \mathtt{eco}}}
\newcommand{\lRS}{{\color{colorRS}\mathtt{rs}}}
\newcommand{\lREL}{{\color{colorREL}\mathtt{rel}}}
\newcommand{\lSW}{{\color{colorSYN}\mathtt{sw}}}
\newcommand{\lHB}{{\color{colorHB}\mathtt{hb}}}
\newcommand{\lBOB}{{\mathtt{bob}}}
\newcommand{\lSC}{{\color{colorSC}\mathtt{sc}}}

\newcommand{\lVF}{{\color{colorVF}\mathtt{vf}}}
\newcommand{\lSRF}{{\color{colorJF}\mathtt{sjf}}}

\newcommand{\lDETOUR}{{{\color{colorDETOUR}\mathtt{detour}}}}
\newcommand{\lDEPS}{{{\color{colorDEPS}\mathtt{deps}}}}
\newcommand{\lCTRL}{{{\color{colorDEPS}\mathtt{ctrl}}}}
\newcommand{\lDATA}{{{\color{colorDEPS}\mathtt{data}}}}
\newcommand{\lADDR}{{{\color{colorDEPS}\mathtt{addr}}}}
\newcommand{\lRMWDEP}{{{\color{colorDEPS}\mathtt{casdep}}}}
\newcommand{\lPPO}{{{\color{colorPPO}\mathtt{ppo}}}}
\newcommand{\lAR}{\mathtt{ar}}

\newcommand{\lSCB}{{\color{colorSCB}\mathtt{scb}}}
\newcommand{\lPSC}{{\color{colorPSC}\mathtt{psc}}}
\newcommand{\lPSCB}{\lPSC_{\rm base}}
\newcommand{\lPSCF}{\lPSC_\lF}

\newcommand{\lmakeE}[1]{#1\mathtt{e}}
\newcommand{\lJFE}{\lmakeE{\lJF}}
\newcommand{\lRFE}{\lmakeE{\lRF}}
\newcommand{\lCOE}{\lmakeE{\lCO}}
\newcommand{\lFRE}{\lmakeE{\lFR}}
\newcommand{\lmakeI}[1]{#1\mathtt{i}}
\newcommand{\lJFI}{\lmakeI{\lJF}}
\newcommand{\lRFI}{\lmakeI{\lRF}}
\newcommand{\lCOI}{\lmakeI{\lCO}}
\newcommand{\lFRI}{\lmakeI{\lFR}}

\tikzset{
   every path/.style={>=stealth},
   po/.style={->,color=colorPO,,shorten >=-0.5mm,shorten <=-0.5mm},
   por/.style={->,color=red,shorten >=-0.5mm,shorten <=-0.5mm},
   ppo/.style={->,color=colorPPO,,shorten >=-0.5mm,shorten <=-0.5mm},
   cf/.style={-,snake=zigzag,segment amplitude=1pt,segment length=3pt,colorCF},
   rmw/.style={->,color=colorRMW,,shorten >=-0.5mm,shorten <=-0.5mm},
   ca/.style={->,color=colorPO,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   jf/.style={->,color=colorJF,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   rf/.style={->,color=colorRF,dashed,,shorten >=-0.5mm,shorten <=-0.5mm},
   rfs/.style={->,color=colorRF,thick,dashed,,shorten >=-0.5mm,shorten <=-0.5mm},
   rb/.style={->,color=colorRB,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   cc/.style={->,color=colorCC,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   ew/.style={<->,color=colorEW,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   mo/.style={->,color=colorMO,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   co/.style={->,color=colorMO,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   sw/.style={->,color=colorSW,dashed,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   vf/.style={->,color=colorVF,dashed,shorten >=-0.5mm,shorten <=-0.5mm},
   obs/.style={->,color=colorOBS,dashed,,shorten >=-0.5mm,shorten <=-0.5mm},
   no/.style={->,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   deps/.style={->,color=colorDEPS,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   then/.style={->,snake=zigzag,segment amplitude=1pt,segment length=3pt},
   esrect/.style={rectangle,dotted},
}

\tikzstyle{extractStyle}=[color=black,rounded corners=3pt,
  dashed,fill=green!10]

\tikzstyle{issuedStyle}=[pattern=custom north east lines, hatchcolor=colorISS, rounded corners]
%% \tikzstyle{coveredStyle}=[pattern=custom north east lines, hatchcolor=colorCOV]
\tikzstyle{coveredStyle}=[]

\newcommand{\setBox}[2]{
    \draw[#1] ($(#2)  + (-1.2,-0.4)$) rectangle ++(2.4,0.8);
}
\newcommand{\bigSetBox}[2]{
    \draw[#1] ($(#2)  + (-1.3,-0.5)$) rectangle ++(2.6,1.0);
}

\newcommand{\extractedBoxText}{{\protect\tikz \protect\draw[extractStyle] (0,0) rectangle ++(0.35,0.35);}}

\newcommand{\coveredBox}[1]{
  \setBox{coveredStyle}{#1}
  %% \draw[pattern=custom north east lines, hatchcolor=colorCOV] ($(#1)  + (-1.2,-0.4)$) rectangle ++(2.4,0.8);
}
\newcommand{\issuedBox}[1]{
  \setBox{issuedStyle}{#1}
}
\newcommand{\issuedCoveredBox}[1]{
  \bigSetBox{coveredStyle}{#1}
  \issuedBox{#1}
}


\newcommand{\ese}[3]{e^{#1}_{#2#3}}
\newcommand{\mese}[3]{\ese{#1}{#2}{#3}\colon}

\newcommand{\thrdstep}[1]{\xrightarrow{#1}}
\newcommand{\esaddpo}[1]{\xhookrightarrow[\lPO]{#1}}
\newcommand{\esaddjf}[1]{\xhookrightarrow[\lJF]{#1}}
\newcommand{\esaddew}[1]{\xhookrightarrow[\lEW]{#1}}
\newcommand{\esaddco}[1]{\xhookrightarrow[\lCO]{#1}}
\newcommand{\esaddrmw}[1]{\xhookrightarrow[\lRMW]{#1}}
\newcommand{\esstep}[1]{\xhookrightarrow[\mathtt{pre}]{#1}}
\newcommand{\esstepcons}[1]{\xhookrightarrow{#1}}
\newcommand{\travstep}[1]{\xrightarrow{#1}}

\newcommand{\TC}{TC}
\newcommand{\TCinit}[1]{\TC_{\mathrm{init}}({#1})}
\newcommand{\TCfinal}[1]{\TC_{\mathrm{final}}({#1})}

\newcommand{\simrel}{\mathcal{I}}

\newcommand{\ea}{f}
% a shortcut to map event names of graph to event structure
\newcommand{\gs}[1]{\underline{#1}}

\newcommand{\Br}{Br}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Pomsets <-> Exec. Graphs  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% thread component of shared mem. label
\newcommand{\tlab}{\lab^{\lTID}}
% data component of shared mem. label
\newcommand{\dlab}{\lab^{\lLAB}}
% step component of shared mem. label, i.e. s --[l]--> s'
\newcommand{\stlab}{\lab^{\lSTEP}}

\newcommand{\el}{\widehat{l}}

% set of all execution graphs
\newcommand{\ExecG}{\mathcal{G}}
\newcommand{\PorfExecG}{\mathcal{G}_{\lPORF}}

% set of all event structures
\newcommand{\WkmES}{\mathcal{S}}

% graph --> pomset
\newcommand{\gpom}{\mathbf{p}}

% pomset --> graph
\newcommand{\pomg}{\mathbf{G}}

% memory model --> pomset lang
\newcommand{\wmmlang}[1]{\mathbf{Pom}(#1)}

% memory model --> prime event struct.
\newcommand{\wmmpes}[2]{\mathbf{S}(#1, #2)}

% labels for shared memory abstraction
\newcommand{\MemLab}{L^{\textsc{m}}}
\newcommand{\TidMemLab}{L^{\textsc{tm}}}
\newcommand{\ThrdMemLab}{L^{\textsc{tms}}}

\newcommand{\lRFs}{{\color{colorRF}\mathtt{RF}}}
\newcommand{\ExecGs}[1]{\ExecG(#1)}

% set of all threaded pomsets (generated by an alphabet)
\newcommand{\PorfPom}[1][{}]{%
  \textsc{PorfPom}\ifthenelse{\isempty{#1}}{}{(#1)}\xspace%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Concurrent Programs Syntax  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\inarrC}[1]{\begin{array}{@{}c@{}}#1\end{array}}
\newcommand{\inpar}[1]{\left(\begin{array}{@{}l@{}}#1\end{array}\right)}
\newcommand{\inset}[1]{\left\{\begin{array}{@{}l@{}}#1\end{array}\right\}}
\newcommand{\inarr}[1]{\begin{array}{@{}l@{}}#1\end{array}}
\newcommand{\inarrII}[2]{\begin{array}{@{}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}\end{array}}
\newcommand{\inarrIII}[3]{\begin{array}{@{}l@{~~}||@{~~}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}&\inarr{#3}\end{array}}
\newcommand{\inarrIV}[4]{\begin{array}{@{}l@{~~}||@{~~}l@{~~}||@{~~}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}&\inarr{#3}&\inarr{#4}\end{array}}
\newcommand{\inarrV}[5]{\begin{array}{@{}l@{~~}||@{~~}l@{~~}||@{~~}l@{~~}||@{~~}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}&\inarr{#3}&\inarr{#4}&\inarr{#5}\end{array}}

\newcommand{\readExpr }[2]{{#2}^{#1}}
\newcommand{\readInst }[3]{#2 \;{:=}\;{#3}^{#1}}
\newcommand{\fenceInst}[1]{\kw{fence}^{#1}}

\newcommand\ifGoto{\kw{if}-\kw{goto}}
\newcommand{\ifGotoInst}[2]{\kw{if} \; #1 \; \kw{goto} \; #2}
\newcommand{\writeInst}[3]{{#2}^{#1}\;{:=}\;#3}
\newcommand{\assignInst}[2]{#1\;{:=}\;#2}
\newcommand{\incInst}[1]{{#1}\texttt{++}}
\newcommand{\binopInst}[3]{{#2} #1 {#3}}

\newcommand{\faiInst}[6]{#3 \;{:=}\;\kw{FADD}_{#6}^{#1#2}({#4},{#5})}
\newcommand{\casInst}[7]{#3 \;{:=}\;\kw{CAS}_{#7}^{#1#2}({#4},{#5},{#6})}

\newcommand{\rfcomment}[1]{\color{teal}{~~\texttt{/\!\!/}\textit{#1}}}
\newcommand{\nocomment}[1]{\color{red!60!black}{~~\texttt{/\!\!/}\textit{#1}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Proper Names and Abbreviations  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% programming languages abbreviations

\newcommand{\Java}{Java\xspace}
\newcommand{\JVM}{JVM\xspace}
\newcommand{\CLANG}{C\xspace}
\newcommand{\CPP}{C/C++\xspace}
\newcommand{\JS}{JavaScript\xspace}
\newcommand{\LLVM}{LLVM\xspace}
\newcommand{\LLVMIR}{LLVM~IR\xspace}
\newcommand{\LLANG}{\ensuremath{\mathsf{L}}\xspace}

%% memory models abbreviations

\newcommand{\MM}[1]{\ensuremath{\mathsf{#1}}\xspace}

\newcommand{\SC}{\MM{SC}}
\newcommand{\DRFx}{\MM{DRFx}}

\newcommand{\Intel}{\MM{x86}}
\newcommand{\TSO}{\MM{TSO}}
\newcommand{\SPARC}{\MM{SPARC}}
\newcommand{\ARM}{\MM{ARM}}
\newcommand{\ARMv}[1]{\MM{ARMv{#1}}}
\newcommand{\IBMPOWER}{\MM{IBM~POWER}}
\newcommand{\POWER}{\MM{POWER}}
\newcommand{\RISC}{\MM{RISC\text{-}V}}

\newcommand{\CMM}{\MM{C11}}
\newcommand{\RCMM}{\MM{RC11}}
\newcommand{\JMM}{\MM{JMM}}
\newcommand{\IMM}{\MM{IMM}}

\newcommand{\Prm}{\MM{Promising}}
\newcommand{\Wkm}{\MM{Weakestmo}}
\newcommand{\WkmS}{\MM{Weakestmo2}}
\newcommand{\MRD}{\MM{MRD}}
\newcommand{\PwP}{\MM{PwP}}

%% proof assistants 

\newcommand{\coq}{\textsc{Coq}\xspace}
\newcommand{\gallina}{\textsc{Gallina}\xspace}
\newcommand{\mathcomp}{\textsc{MathComp}\xspace}
\newcommand{\analysis}{\textsc{MathComp-Analysis}\xspace}
\newcommand{\finmap}{\textsc{finmap}\xspace}
\newcommand{\relationalgebra}{\textsc{relation-algebra}\xspace}
\newcommand{\ssreflect}{\textsc{SSReflect}\xspace}
\newcommand{\equations}{\textsc{Equations}\xspace}

\newcommand{\agda}{\textsc{Agda}\xspace}
\newcommand{\arend}{\textsc{Arend}\xspace}
\newcommand{\idris}{\textsc{Idris}\xspace}
\newcommand{\isabelle}{\textsc{Isabelle/HOL}\xspace}

%% tools 

\newcommand{\hmc}{\textsc{HMC}\xspace}
\newcommand{\hmclbf}{$\hmc_{\lbf}$\xspace}
\newcommand{\RCMC}{\textsc{RCMC}\xspace}
\newcommand{\rcmc}{\textsc{rcmc}\xspace}
\newcommand{\genmc}{\textsc{GenMC}\xspace}
\newcommand{\lockmc}{\textsc{LAPOR}\xspace}
\newcommand{\genmcmath}{\textnormal{\genmc}\xspace}
\newcommand{\Tracer}{\textsc{Tracer}\xspace}
\newcommand{\Herd}{\textsc{Herd}\xspace}
\newcommand{\PPCMEM}{\textsc{PPCMEM}\xspace}
\newcommand{\ARMMEM}{\textsc{ARMMEM}\xspace}
\newcommand{\CPPMEM}{\textsc{CPPMEM}\xspace}
\newcommand{\TriCheck}{\textsc{TriCheck}\xspace}
\newcommand{\rmem}{\textsc{rmem}\xspace}
\newcommand{\Nidhugg}{\textsc{Nidhugg}\xspace}
\newcommand{\CDSChecker}{\textsc{CDS\-Checker}\xspace}
\newcommand{\CBMC}{\textsc{CBMC}\xspace}
\newcommand{\Dartagnan}{\textsc{Dartagnan}\xspace}
\newcommand{\Verisoft}{\textsc{Verisoft}\xspace}
\newcommand{\CHESS}{\textsc{CHESS}\xspace}
\newcommand{\wmc}{\textsc{WMC}\xspace}

%% other abbrevations

\newcommand{\CAS}{\textsc{CAS}\xspace}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%  Tex Utils  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% abbrevations
%% \newcommand{\ie}{\textit{i.e.,}\xspace}
%% \newcommand{\eg}{\textit{e.g.,}\xspace}
%% \newcommand{\etc}{\textit{etc.}\xspace}
%% \newcommand{\sth}{\textit{s.t.}\xspace}
%% \newcommand{\etal}{\textit{et~al.}\xspace}
%% \newcommand{\wrt}{\textit{w.r.t.}\xspace}
%% \newcommand{\aka}{\textit{a.k.a.}\xspace}
%% \newcommand{\corr}{\textit{corr.}\xspace}

% definitions/lemmas/theorems etc
\newtheorem{lemma}{Лемма}
\newtheorem{theorem}{Теорема}
\newtheorem{proposition}{Утверждение}
\newtheorem{definition}{Определение}

%% for proof trees
\newcommand{\rulehskip}{\hskip 1.5em}
\newcommand{\rulevspace}{\vspace{3em}}

%% for comments
\newcommand{\eupp}[1]{{\color{orange!70!black}\textbf{Evgenii: #1}}}
\newcommand{\todo}[1]{{\color{red!70!black}\textbf{TODO: #1}}}

%% labels for axioms

\newcounter{mylabelcounter}

\makeatletter
\newcommand{\labelAxiom}[2]{%
\hfill{\normalfont\textsc{(#1)}}\refstepcounter{mylabelcounter}
\immediate\write\@auxout{
  \string\newlabel{#2}{{\unexpanded{\normalfont\textsc{#1}}}{\thepage}{{\unexpanded{\normalfont\textsc{#1}}}}{mylabelcounter.\number\value{mylabelcounter}}{}}
}
}
\makeatother


% % for cleveref

\crefformat{section}{#2\S{}#1#3}
\Crefname{section}{Глава}{Главы}
\Crefformat{section}{Глава #2#1#3}

\crefformat{subsection}{#2\S{}#1#3}
\Crefname{subsection}{Глава}{Главы}
\Crefformat{subsection}{Глава #2#1#3}

\crefname{figure}{\text{Рис.}}{\text{Рис.}}
\Crefname{figure}{\text{Рисунок}}{\text{Рисунки}}

\crefname{definition}{\text{Опр.}}{\text{Опр.}}
\Crefname{definition}{\text{Определение}}{\text{Определения}}
\crefname{lemma}{\text{Лемма}}{\text{Лемма}}
\Crefname{lemma}{\text{Лемма}}{\text{Леммы}}
\crefname{theorem}{\text{Теорема}}{\text{Теорема}}
\Crefname{theorem}{\text{Теорема}}{\text{Теоремы}}


%% \crefname{corollary}{\text{Corollary}}{\text{corollaries}}
%% \Crefname{corollary}{\text{Corollary}}{\text{Corollaries}}
%% \crefname{lemma}{\text{Lemma}}{\text{Lemmas}}
%% \Crefname{lemma}{\text{Lemma}}{\text{Lemmas}}
%% \crefname{proposition}{\text{Prop.}}{\text{Prop.}}
%% \Crefname{proposition}{\text{Proposition}}{\text{Propositions}}
%% \crefname{definition}{\text{Def.}}{\text{Definitions}}
%% \Crefname{definition}{\text{Definition}}{\text{Definitions}}
%% \crefname{notation}{\text{Notation}}{\text{Notations}}
%% \Crefname{notation}{\text{Notation}}{\text{Notations}}
%% \crefname{theorem}{\text{Theorem}}{\text{Theorems}}
%% \Crefname{theorem}{\text{Theorem}}{\text{Theorems}}
%% \crefname{conjecture}{\text{Conj.}}{\text{Conjectures}}
%% \Crefname{conjecture}{\text{Conjecture}}{\text{Conjectures}}
